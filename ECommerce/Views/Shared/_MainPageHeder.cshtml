@using Entity.EntityClass
@{

}
@section Styles {
    <link rel="stylesheet" href="~/css/MainPageHeader.css" />

}

<header>
    <nav class="uk-navbar-container">
        <div class="uk-container">
            <div uk-navbar>

                <div class="uk-navbar-left">

                    <ul class="uk-navbar-nav">
                        <li class="uk-active"><a href="#">ECommerce</a></li>
                        <li class="uk-active"><a asp-action="Index" asp-controller="Home">Home</a></li>
                        <li class="uk-active"><a asp-action="Basket" asp-controller="Purchase">Basket  @await Component.InvokeAsync("BasketItemCounter")</a></li>
                        @if (User.Identity.IsAuthenticated)
                        {
                            <li class="uk-active"><a>Welcome @User.Identity.Name!</a></li>
                        }
                    </ul>

                </div>

                <div class="uk-navbar-right">

                    <ul class="uk-navbar-nav">
                        <li>
                            <a href="#">Auth</a>
                            <div class="uk-navbar-dropdown">
                                <ul class="uk-nav uk-navbar-dropdown-nav">
                                    <li><a asp-action="LogIn" asp-controller="Auth">LogIn</a></li>
                                    <li><a asp-action="SignIn" asp-controller="Auth">SignIn</a></li>
                                </ul>
                            </div>
                        </li>
                        <li><a asp-action="LogOut" asp-controller="Auth">LogOut</a></li>
                    </ul>
                    @if (ViewBag.userProfile == null)
                    {
                        if (User.Identity.IsAuthenticated)
                        {
                            <li style="list-style-type: none;">
                                <form asp-action="CreateUserProfile" asp-controller="UserProfile" method="post">
                                    <button type="submit" class="btn btn-success">Create user profile</button>
                                </form>
                            </li>
                        }

                    }else
                    {
                        UserProfile profile = ViewBag.userProfile;
                        <li style="list-style-type: none;">
                            <a>
                                <img src="@(profile.ProfileImgPath == null ? "https://psgpharma.ac.in/wp-content/uploads/2019/02/empty-img.jpg" :  profile.ProfileImgPath)"
                                    style="width:50px; height:50px;border-radius:50%;"
                                />
                                &#160;
                                @profile.AppUser.UserName
                            </a>
                        </li>
                    }
                </div>

            </div>
        </div>
    </nav>
</header>